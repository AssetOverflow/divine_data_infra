# Redis configuration tuned for DivineHaven local development
#
# The goal is to provide predictable performance and persistence while
# keeping resource usage modest. These settings are safe defaults for
# docker-compose driven environments and can be adjusted per deployment
# needs.

bind 0.0.0.0
protected-mode yes
port 6379

databases 16

timeout 0
tcp-keepalive 60

# Enable AOF for durability with an every-second fsync policy
appendonly yes
appendfsync everysec

dir /data

# Set an upper bound on memory usage and use LRU for eviction. The limit
# balances responsiveness with container footprints; increase for
# production workloads with larger caches.
maxmemory 256mb
maxmemory-policy allkeys-lru

# Disable RDB snapshots to avoid duplicate persistence with AOF for this
# workload. Uncomment to enable periodic snapshots.
save ""

# Enable lazy freeing to smooth out eviction costs.
lazyfree-lazy-eviction yes
lazyfree-lazy-expire yes
lazyfree-lazy-server-del yes

# Tune networking for snappier responses and resilience.
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit pubsub 32mb 8mb 60

auto-aof-rewrite-percentage 50
auto-aof-rewrite-min-size 64mb
